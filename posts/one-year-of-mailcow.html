<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>One Year of Mailcow - kspears.com</title>
  <link rel="stylesheet" href="../css/style.css">
</head>
<body>
  <header>
    <div class="header-inner">
      <h1><a href="../index.html">kspears.com</a></h1>
      <nav>
        <a href="../index.html">Home</a>
        <a href="../about.html">Me</a>
        <a href="../posts.html">Posts</a>
      </nav>
    </div>
  </header>

  <div class="container">
    <main>
      <a href="../posts.html" class="back-link">← All posts</a>

      <article>
        <div class="post-featured-img">
          <img src="../static/images/mailcow-sm.png" alt="Mailcow">
        </div>
        <h1>One Year of Mailcow</h1>
        <div class="post-meta">Apr 23, 2023</div>

        <p>I've been hosting my personal domain's email on <a href="https://mailcow.email/">Mailcow</a> for over a year now after Google apps started charging for their service and I have to say it works pretty good. I had an good architecture to start but needed to iterate on the design of the infrastructure. A few things that changed was I did swap out EFS for a 2nd EBS data volume that was dynamically attached at EC2 boot time. I moved my s3 back backups into glacier to reduce costs. And I did end up needing to upgrade my Ec2 to larger instance, I still need to revisit the metrics on this to determine if it was really necessary. But you know how it is when you break something and the family is using it... you hear about it.</p>

        <h2>AWS Hosting</h2>
        <p>I do host this on AWS, my reasoning was just keeping my skills sharp. I had originally spin up the stack with Cloudformation to test out some of the latest changes offered in cloudformation but have since converted those scripts to Terraform. Terraform is so simple... there's no comparison.
        This is not the cheapest solution, I could host this anywhere or at home but I chose to put it here to continue honing my skills in AWS. Also let's be honest, AWS is a really solid host.</p>

        <h2>Mailcow Pros:</h2>
        <ul>
          <li>It's stupid simple to update, they have a script that will pull the latest changes from git, pull docker images, restart services and then clean up after itself.</li>
          <li>It just works, I've had no real problems other than one's I've created. If you leave it alone it just runs.</li>
          <li>Backup and restore works. I've only done full backups and restores so I can't comment on restoring individual messages but I can spin up a empty ec2 instance and bring up my server quickly with a restore from S3.</li>
        </ul>

        <h2>Mailcow Cons:</h2>
        <ul>
          <li>It's a bit bloated, there's some included things that may not be really needed. Like for instance I like the activesync for my mobile device but honestly I could probably just use IMAP idle.</li>
          <li>SOGO is ugly and we did have some issues with the calendar. It'd be nice if there was a better solution. I know there is an option to use Nextcloud but I haven't played with that yet.</li>
          <li>Documentation could use some work, there were some places that I had to do some extra research and guessing when I was building out my solution.</li>
        </ul>

        <h2>TLDR</h2>
        <p>If you want to host your own email, Mailcow just works. There are other less resource intensive solutions out there that have good reviews too, I suggest trying them out and pick what works for you. Now with hind sight being 20/20 would I self host email again? I think so? I've learned a lot about email and specifically DKIM and SPF records (I'll do a whole post about those) and so that's been a good growing experience. I haven't lost any email (knock on wood) so that's good. And honestly the server does just work.</p>
      </article>
    </main>

    <footer>
      <a href="https://www.linkedin.com/in/kevin-spears/">LinkedIn</a> ·
      <a href="https://github.com/kspears/">GitHub</a>
      <p class="footer-location">Oregon</p>
    </footer>
  </div>
</body>
</html>
